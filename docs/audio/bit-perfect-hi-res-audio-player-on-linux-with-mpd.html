<!DOCTYPE html>
<html lang="en-GB">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Bit-Perfect Hi-Res Audio Player on Linux with MPD | Maxie’s Notes</title>
    <meta name="description" content="Maksim Shkrebtan’s personal documentation website">
    
    
    <link rel="preload" href="/assets/css/0.styles.3d7f8a6f.css" as="style"><link rel="preload" href="/assets/js/app.f69bd480.js" as="script"><link rel="preload" href="/assets/js/2.8197a52c.js" as="script"><link rel="preload" href="/assets/js/12.30db6889.js" as="script"><link rel="prefetch" href="/assets/js/10.f8a65fdc.js"><link rel="prefetch" href="/assets/js/11.db63c15b.js"><link rel="prefetch" href="/assets/js/13.32b73e8d.js"><link rel="prefetch" href="/assets/js/14.5d2fdf15.js"><link rel="prefetch" href="/assets/js/15.766839bf.js"><link rel="prefetch" href="/assets/js/16.323debb1.js"><link rel="prefetch" href="/assets/js/17.76ec3a5e.js"><link rel="prefetch" href="/assets/js/18.dc3d9ccb.js"><link rel="prefetch" href="/assets/js/19.b639cabd.js"><link rel="prefetch" href="/assets/js/20.d6fae5d5.js"><link rel="prefetch" href="/assets/js/21.00edb874.js"><link rel="prefetch" href="/assets/js/22.d9606d95.js"><link rel="prefetch" href="/assets/js/23.f00bc4d3.js"><link rel="prefetch" href="/assets/js/24.8aeda6e2.js"><link rel="prefetch" href="/assets/js/25.296bb399.js"><link rel="prefetch" href="/assets/js/26.be684eae.js"><link rel="prefetch" href="/assets/js/3.9c50fbce.js"><link rel="prefetch" href="/assets/js/4.ad5cb73d.js"><link rel="prefetch" href="/assets/js/5.914e7e80.js"><link rel="prefetch" href="/assets/js/6.0879e0f6.js"><link rel="prefetch" href="/assets/js/7.ef3f3360.js"><link rel="prefetch" href="/assets/js/8.f53e5623.js"><link rel="prefetch" href="/assets/js/9.ee08e2a7.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3d7f8a6f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Maxie’s Notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/audio/bit-perfect-hi-res-audio-player-on-linux-with-mpd.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/ru/" class="nav-link">Русский</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/audio/bit-perfect-hi-res-audio-player-on-linux-with-mpd.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/ru/" class="nav-link">Русский</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Audio</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/audio/bit-perfect-hi-res-audio-player-on-linux-with-mpd.html" class="active sidebar-link">Bit-Perfect Hi-Res Audio Player on Linux with MPD</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/audio/bit-perfect-hi-res-audio-player-on-linux-with-mpd.html#problem" class="sidebar-link">Problem</a></li><li class="sidebar-sub-header"><a href="/audio/bit-perfect-hi-res-audio-player-on-linux-with-mpd.html#solution" class="sidebar-link">Solution</a></li><li class="sidebar-sub-header"><a href="/audio/bit-perfect-hi-res-audio-player-on-linux-with-mpd.html#prerequisites" class="sidebar-link">Prerequisites</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/audio/bit-perfect-hi-res-audio-player-on-linux-with-mpd.html#computer" class="sidebar-link">Computer</a></li><li class="sidebar-sub-header"><a href="/audio/bit-perfect-hi-res-audio-player-on-linux-with-mpd.html#linux-distro" class="sidebar-link">Linux Distro</a></li><li class="sidebar-sub-header"><a href="/audio/bit-perfect-hi-res-audio-player-on-linux-with-mpd.html#usb-dac" class="sidebar-link">USB DAC</a></li></ul></li><li class="sidebar-sub-header"><a href="/audio/bit-perfect-hi-res-audio-player-on-linux-with-mpd.html#setup" class="sidebar-link">Setup</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/audio/bit-perfect-hi-res-audio-player-on-linux-with-mpd.html#permanent-index-value-for-the-sound-card-recommended" class="sidebar-link">Permanent index value for the sound card (Recommended)</a></li><li class="sidebar-sub-header"><a href="/audio/bit-perfect-hi-res-audio-player-on-linux-with-mpd.html#mpd" class="sidebar-link">MPD</a></li></ul></li></ul></li><li><a href="/audio/edit-encoded-audio-with-ffmpeg-and-audacity.html" class="sidebar-link">Edit Encoded Audio with FFmpeg and Audacity</a></li><li><a href="/audio/downsample-audio-with-sox.html" class="sidebar-link">Downsample Audio with SoX</a></li><li><a href="/audio/dsd-to-pcm-conversion-with-ffmpeg.html" class="sidebar-link">DSD to PCM Conversion with FFmpeg</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Kindle</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Privacy</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Proxy &amp; VPN</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>macOS</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="bit-perfect-hi-res-audio-player-on-linux-with-mpd"><a href="#bit-perfect-hi-res-audio-player-on-linux-with-mpd" aria-hidden="true" class="header-anchor">#</a> Bit-Perfect Hi-Res Audio Player on Linux with MPD</h1> <p><em>Build a custom audiophile quality digital audio player with a Linux PC,
MPD and a USB DAC.</em></p> <h2 id="problem"><a href="#problem" aria-hidden="true" class="header-anchor">#</a> Problem</h2> <p>If you have a growing digital collection of music titles, you might be
considering buying a network audio player to provide audiophile quality
playback. However, being an excellent all-in-one and easy to set up devices,
network audio players still have limitations:</p> <ul><li><p>they might have a built-in DAC, which you cannot swap;</p></li> <li><p>they might not support some storage devices, such as external HDD;</p></li> <li><p>they might not support some audio formats, take DSD128 for example;</p></li> <li><p>they are usually controlled with a mobile app, which might be inconvenient or
buggy;</p></li> <li><p>they are rather expensive!</p></li></ul> <h2 id="solution"><a href="#solution" aria-hidden="true" class="header-anchor">#</a> Solution</h2> <p>An alternative to a ready-made network audio player would be a PC with proper
software and a USB DAC.</p> <p>When it comes to the software, my personal recommendation would be to go with
<a href="https://www.musicpd.org/" target="_blank" rel="noopener noreferrer">Music Player Daemon (MPD)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. It is an extremely
flexible, powerful, server-side application for playing music.</p> <p>MPD features:</p> <ul><li><p>support of
<a href="https://en.wikipedia.org/wiki/Advanced_Linux_Sound_Architecture" target="_blank" rel="noopener noreferrer">ALSA<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
output and hence bit-perfect playback;</p></li> <li><p>a great variety of audio formats supported (plays virtually anything);</p></li> <li><p>a wide selection of clients available, from console to mobile apps, for
remote playback control;</p></li> <li><p>you can play music from any storage device, be it an external HDD, a USB
drive, a memory card, an optical disk or a NAS volume.</p></li></ul> <p>And it is free! Just as Linux.</p> <h2 id="prerequisites"><a href="#prerequisites" aria-hidden="true" class="header-anchor">#</a> Prerequisites</h2> <h3 id="computer"><a href="#computer" aria-hidden="true" class="header-anchor">#</a> Computer</h3> <p>MPD runs on Windows, macOS, BSD, Linux and other UNIX-like operating systems.
But if you want to achieve <em>bit-perfect</em> playback, the best and (probably) the
only option is to run it on Linux.</p> <p>A part of Linux is ALSA (Advanced Linux Sound Architecture) — a set of
built-in Linux kernel modules that provide an interface (API) for sound card
device drivers. ALSA handles automatic configuration of sound-card hardware and
multiple sound devices.</p> <p>With ALSA you can configure a direct sound output without any processing
(e. g. resampling) in between the audio player and the sound card. ALSA is
supported by all Linux audio players including MPD.</p> <p>That said, you will need any computer that can run Linux. Even a single-board
ARM-powered computer, such as Raspberry Pi, will do.</p> <p>As for me, I needed something more powerful than a Raspberry Pi, that's why I
bought an Intel NUC mini-PC unit with an x86-64 CPU, and installed RAM and SSD
in it — payed less than $250 for everything. My NUC is running Debain Linux. I
installed strongSwan VPN server and an NFS server on it to make my media
library available throughout the network, and PLEX server for video streaming.
And of course, I installed MPD and configured it to output audio through ALSA
to my Arcam irDAC-II connected via USB.</p> <h3 id="linux-distro"><a href="#linux-distro" aria-hidden="true" class="header-anchor">#</a> Linux Distro</h3> <p>So, you will need to install a Linux distribusion on your computer, if you
are not using it already.</p> <p>Linux by itself is just a kernel. If you want a complete operating system, you
need to choose and install a Linux distribusion which includes the Linux
kernel, package manager and a collection of software. My personal choice is
<a href="https://www.debian.org/" target="_blank" rel="noopener noreferrer">Debian<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. If you are new to Linux, I would recommend
you to start with <a href="https://ubuntu.com/" target="_blank" rel="noopener noreferrer">Ubuntu<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>In case you are going to run MPD on a server, consider installing a server
variant of the distribusion of your choice. Although my Intel NUC has an HDMI
output for connecting a display, I do not use it as a desktop computer.
Instead, I interact with it through remote command-line interface (via SSH) and
I control MPD playback on my iPhone. I do not need a window system, a window
manager, or a desktop environment, and server distribusions do not include
these.</p> <h3 id="usb-dac"><a href="#usb-dac" aria-hidden="true" class="header-anchor">#</a> USB DAC</h3> <p>If you want to get the best sonic quality, you will need an good external
Digital-to-analog converter (DAC). There are plenty of DACs available and you
have to choose one by yourself. The one I use is <a href="https://www.arcam.co.uk/products,rSeries,USB-DAC,irdacii.htm" target="_blank" rel="noopener noreferrer">Arcam
irDAC-II<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Back
in the day, I bought it for a very good price. If you want to get a very good
value for money, consider a DAC from <a href="https://emotiva.com/" target="_blank" rel="noopener noreferrer">Emotiva<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> or
<a href="https://www.schiit.com/" target="_blank" rel="noopener noreferrer">Schiit<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="setup"><a href="#setup" aria-hidden="true" class="header-anchor">#</a> Setup</h2> <p>So, you have Linux running on your computer, a DAC attached to it via USB and
your music library mounted in the filesystem. Time to set up MPD!</p> <p>MPD is a server application (hence the name — Music Player Deamon), and it does
not have a GUI to interact with. Instead, you need to edit its configuration
file located at <code>/etc/mpd.conf/</code>. It's not the only file you need to edit, so
the best way to go is to open a terminal emulator and use a terminal text
editor, such as Vim, Emacs or Nano.</p> <p>This guide assumes that you are using Ubuntu or any other Debian-based Linux
distro and use <code>vim</code> as text editor.</p> <div class="tip custom-block"><p>If you don't feel comfortable with a command-line interface, you can run a file
browser as the superuser and edit files in graphical text editors. To do this
on Ubuntu 18.04, for example, open a terminal emulator and run:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo nautilus
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <h3 id="permanent-index-value-for-the-sound-card-recommended"><a href="#permanent-index-value-for-the-sound-card-recommended" aria-hidden="true" class="header-anchor">#</a> Permanent index value for the sound card (Recommended)</h3> <div class="tip custom-block"><p class="custom-block-title">Optional step</p> <p>This step is optional and you might skip it if you have
only one external audio device that you connect to your computer. However, I do
recommend to set up permanent index values for your sound devices if you have
many of them.</p></div> <p>Every time you connect your DAC to your computer, the <em>Generic USB Audio
Driver</em> (the <code>snd-usb-audio</code> kernel module) assigns an index value to the DAC's
sound card. You will need to specify this value in the output configration of
MPD. When you have multiple audio devices and you connect and disconnect them
often, the <code>snd-usb-audio</code> module might assign different index values for the
same device each time you reconnect it. To make sure that an MPD output (and
you can configure multiple outputs!) is always using the same device, you might
want to assign permanent index values to each device.</p> <p>To assign permanent index values, you need to set them in the <code>snd-usb-audio</code>
module options.</p> <h4 id="list-the-soundcards"><a href="#list-the-soundcards" aria-hidden="true" class="header-anchor">#</a> List the soundcards</h4> <p>First, find out which index values are already used for other sound devices.
Disconnect your DAC(s) and list all the soundcards:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>aplay -l
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="output"><p class="title">Example output:</p><div class="language- line-numbers-mode"><pre class="language-text"><code>**** List of PLAYBACK Hardware Devices ****
card 0: PCH [HDA Intel PCH], device 0: ALC283 Analog [ALC283 Analog]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: PCH [HDA Intel PCH], device 1: ALC283 Digital [ALC283 Digital]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: PCH [HDA Intel PCH], device 3: HDMI 0 [HDMI 0]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: PCH [HDA Intel PCH], device 7: HDMI 1 [HDMI 1]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: PCH [HDA Intel PCH], device 8: HDMI 2 [HDMI 2]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></div><p>In the example output above you see that index <code>0</code> is assigned to the <code>HDA Intel PCH</code> soundcard. This is a soundcard integrated into the motherboard.</p> <p>When you connect your DAC, its sound card gets a free index. Let's see what
happens when I connect my Arcam irDAC-II:</p> <div class="output"><p class="title">A USB DAC connected</p><div class="language- line-numbers-mode"><pre class="language-text"><code>**** List of PLAYBACK Hardware Devices ****
card 0: PCH [HDA Intel PCH], device 0: ALC283 Analog [ALC283 Analog]
  Subdevices: 1/1
...
card 1: II [irDAC II], device 0: USB Audio [USB Audio]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></div><p>From this output you see that soundcard <code>irDAC II</code> got an index value of <code>1</code>
and it controls only one audio device <code>0</code> named simply <code>USB Audio</code>.</p> <p>Let's make the soundcard index <code>1</code> permanent for <code>irDAC II</code>.</p> <h4 id="find-the-vid-and-pid-of-your-dac"><a href="#find-the-vid-and-pid-of-your-dac" aria-hidden="true" class="header-anchor">#</a> Find the VID and PID of your DAC</h4> <p>To do this you need to find out the Vendor ID (VID) and the Product ID (PID) of
your USB DAC. These values identify a plugged USB device. List all the attached
USB devices and try to find your DAC. For example:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>lsusb
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="output"><p class="title">Output:</p><div class="language- line-numbers-mode"><pre class="language-text"><code>Bus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
Bus 001 Device 003: ID 8087:0aa7 Intel Corp.
Bus 001 Device 073: ID 25c4:0008
Bus 001 Device 058: ID 1058:25a2 Western Digital Technologies, Inc.
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div><p>Most likely, you will not see the vendor name of your device in the list. To
understand which device is your DAC, try to disconnect the DAC, list the USB
devices, reconnect the DAC and print the list again to see what IDs appeared in
the list. You can also increase the verbosity of <code>lsusb</code> output with the
<code>--verbose</code> option:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>lsusb --verbose
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>In the verbose output try to search for terms <code>Audio</code> and/or <code>Control Device</code>.</p> <p>With the help of the disconnect-list-connect-list-again method I found out that
my DAC is denoted as <code>Bus 001 Device 073: ID 25c4:0008</code> line in the <code>lsusb</code>
output. Here <code>25c4</code> is the Vendor ID and <code>0008</code> is the Product ID.</p> <h4 id="set-a-permanent-index-for-your-dac"><a href="#set-a-permanent-index-for-your-dac" aria-hidden="true" class="header-anchor">#</a> Set a permanent index for your DAC</h4> <p>Let's edit the <code>/etc/modprobe.d/alsa-base.conf</code> and set options for the
<code>snd-usb-audio</code> module. First, open the file in a text editor:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo vim /etc/modprobe.d/alsa-base.conf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>According to the <a href="https://alsa-project.org/wiki/Matrix:Module-usb-audio" target="_blank" rel="noopener noreferrer">ALSA Project
documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, the
values of module options for <code>snd-usb-audio</code>, such as <code>index</code>, <code>vid</code> and <code>pid</code>,
should be arrays of integers. Below is an example of how to set the options,
just add that single line to the file:</p> <div class="output"><p class="title">/etc/modprobe.d/alsa-base.conf:</p><div class="language- line-numbers-mode"><pre class="language-text"><code>options snd-usb-audio index=1 vid=0x25c4 pid=0x0008
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div><p>Note that VID and PID are hexadecimal numbers, so you need to prefix them with
<code>0x</code>.</p> <p>If you want to assign another permanent index value to another sound device of
yours, add its index number, VID and PID to the corresponding arrays. Use
commas to separate the values in the arrays.</p> <p>In the following example I assign index <code>2</code> to my second DAC — a Dragonfly
Black — which has a VID <code>21b4</code> and PID <code>0083</code>:</p> <div class="output"><p class="title">/etc/modprobe.d/alsa-base.conf:</p><div class="language- line-numbers-mode"><pre class="language-text"><code>options snd-usb-audio index=1,2 vid=0x25c4,0x21b4 pid=0x0008,0x0083
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div><p>When you set the proper values, write the file (use <code>:wq</code> in Vim) and reload
the <code>snd-usb-audio</code> kernel module:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo modprobe -r snd-usb-audio
sudo modprobe snd-usb-audio
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>That's it! You can now check your USB devices list while
disconnecting/connecting your audio devices in random order and see that each
device gets the same index number every time you connect it.</p> <h3 id="mpd"><a href="#mpd" aria-hidden="true" class="header-anchor">#</a> MPD</h3> <p>Install MPD:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo apt-get update
sudo apt-get install mpd
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Edit the MPD configuration file (<code>/etc/mpd.conf</code>) in order to specify the
required and optional files and directories. Here is my configuration, for
example:</p> <div class="language-conf line-numbers-mode"><pre class="language-text"><code>music_directory &quot;/media/Media/Music&quot;

database {
  plugin &quot;simple&quot;
  path &quot;/var/lib/mpd/db&quot;
}
state_file   &quot;/var/lib/mpd/state&quot;
sticker_file &quot;/var/lib/mpd/stickers&quot;
playlist_directory &quot;/var/lib/mpd/playlists&quot;

log_file &quot;syslog&quot;
#log_level &quot;verbose&quot;

user &quot;mpd&quot;
zeroconf_name &quot;Intel NUC — MPD&quot;
auto_update &quot;no&quot;

resampler {
  plugin &quot;libsamplerate&quot;
  type &quot;0&quot;
}
replaygain &quot;off&quot;

input {
  plugin &quot;tidal&quot;
  enabled &quot;no&quot;
}

input {
  plugin &quot;qobuz&quot;
  enabled &quot;no&quot;
}

audio_output {
  type &quot;alsa&quot;
  device &quot;hw:1,0&quot;
  name &quot;Arcam irDAC-II&quot;

  auto_resample &quot;no&quot;
  auto_channels &quot;no&quot;
  auto_format &quot;no&quot;
  replay_gain_handler &quot;none&quot;
  dop &quot;yes&quot;

  mixer_type &quot;none&quot;
}

audio_output {
  type &quot;alsa&quot;
  device &quot;hw:2,0&quot;
  name &quot;AudioQuest DragonFly Black v1.5&quot;

  auto_resample &quot;no&quot;
  auto_channels &quot;no&quot;
  auto_format &quot;no&quot;
  replay_gain_handler &quot;none&quot;

  mixer_type &quot;hardware&quot;
  mixer_device &quot;hw:2&quot;
  mixer_control &quot;PCM&quot;
  mixer_index &quot;0&quot;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div><p>Now restart MPD:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo systemctl restart mpd.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Connect to it with your client!</p> <div class="warning custom-block"><p>This guide is being updated. Stay tuned!‥</p></div> <br> <!----> <br> <div style="text-align:center;font-size:x-small;">
    Allow loading scripts from disqus.com to see the comments.
</div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/audio/edit-encoded-audio-with-ffmpeg-and-audacity.html">
          Edit Encoded Audio with FFmpeg and Audacity
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f69bd480.js" defer></script><script src="/assets/js/2.8197a52c.js" defer></script><script src="/assets/js/12.30db6889.js" defer></script>
  </body>
</html>
